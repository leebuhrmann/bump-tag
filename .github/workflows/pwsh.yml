name: PowerShell Example

on:
    workflow_call:
      secrets:
        github_pat:
          required: true

jobs:
  ps-job:
    runs-on: windows-latest
    steps:
      - name: Say Hello
        run: |
          Write-Host "Hello from PowerShell"
          
      # - name: Get Public Repos
      #   run: |
      #     $Uri = "https://api.github.com/users/leebuhrmann/repos"
      #     $Headers = @{
      #         "Accept" = "application/vnd.github+json"
      #         "Authorization"="Bearer ${{ secrets.github_pat }}"
      #         "X-GitHub-Api-Version"="2022-11-28"
      #     }
      #     $Response = Invoke-RestMethod -Uri $Uri -Headers $Headers -Method Get
      #     $response | Select-Object name, description | Format-Table

      - name: Checkout Repo
        uses: actions/checkout@v3
      - name: List Files
        run: dir
      - name: Get Public Repos
        run: .\pull-repos.bat